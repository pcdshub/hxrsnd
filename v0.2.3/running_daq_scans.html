

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Running DAQ Scans &mdash; HXRSnD 0.2.3 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Calibrating Delay Scans" href="calibrating_delay_scans.html" />
    <link rel="prev" title="Running Scans" href="running_scans.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> HXRSnD
          

          
          </a>

          
            
            
              <div class="version">
                0.2.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_usage.html">Basic Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripting.html">Adding Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="screens.html">EDM Screens</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_scans.html">Running Scans</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Running DAQ Scans</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#configuring-the-daq">Configuring the DAQ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#running-the-scan">Running the Scan</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="calibrating_delay_scans.html">Calibrating Delay Scans</a></li>
</ul>
<p class="caption"><span class="caption-text">Devices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sndsystem.html">Split and Delay System</a></li>
<li class="toctree-l1"><a class="reference internal" href="macromotor.html">Macromotors</a></li>
<li class="toctree-l1"><a class="reference internal" href="tower.html">Towers</a></li>
<li class="toctree-l1"><a class="reference internal" href="aerotech.html">Aerotech Motors</a></li>
<li class="toctree-l1"><a class="reference internal" href="attocube.html">Attocube Motors</a></li>
<li class="toctree-l1"><a class="reference internal" href="diode.html">Wave-8 Diodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="pneumatic.html">Pneumatics and Air Bearings</a></li>
<li class="toctree-l1"><a class="reference internal" href="rtd.html">Temperature Sensors</a></li>
</ul>
<p class="caption"><span class="caption-text">Plans</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="alignment.html">Alignment Plans</a></li>
<li class="toctree-l1"><a class="reference internal" href="calibration.html">Delay Calibration</a></li>
<li class="toctree-l1"><a class="reference internal" href="scans.html">General Scans</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc_plans.html">Miscellaneous</a></li>
</ul>
<p class="caption"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="bragg.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utility Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="exceptions.html">Exceptions</a></li>
</ul>
<p class="caption"><span class="caption-text">Core SnD Packages</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://pswww.slac.stanford.edu/swdoc/releases/skywalker/pswalker/">pswalker</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pswww.slac.stanford.edu/swdoc/releases/skywalker/pcds-devices/">pcds-devices</a></li>
<li class="toctree-l1"><a class="reference external" href="https://slaclab.github.io/pydm/">pydm</a></li>
</ul>
<p class="caption"><span class="caption-text">Related Software</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/bluesky">bluesky</a></li>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/ophyd">ophyd</a></li>
</ul>
<p class="caption"><span class="caption-text">GitHub Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/slaclab/">SLAC</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/pcdshub/">PCDS</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">HXRSnD</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Running DAQ Scans</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/running_daq_scans.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="running-daq-scans">
<h1>Running DAQ Scans<a class="headerlink" href="#running-daq-scans" title="Permalink to this headline">¶</a></h1>
<p>Scans can be run using the DAQ to acquire data. Once the plans are defined, and
the DAQ is configured, it is passed to the DAQ-configured <code class="docutils literal notranslate"><span class="pre">RunEngine</span></code> which
will correctly run the DAQ with the scan.</p>
<div class="section" id="configuring-the-daq">
<h2>Configuring the DAQ<a class="headerlink" href="#configuring-the-daq" title="Permalink to this headline">¶</a></h2>
<p>Before any scans can be made, the DAQ must be configured both using normal DAQ
EDM screens, and the python DAQ object.</p>
<div class="section" id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h3>
<p>Below is a quick list of what must be done to ensure the scan can work properly:</p>
<ul>
<li><p>Restart the DAQ and ensure it is opened properly.</p></li>
<li><p>Select the proper configuration type and select all desired devices.</p></li>
<li><p>Configure the DAQ from python using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">snd</span><span class="o">.</span><span class="n">daq</span><span class="o">.</span><span class="n">configure</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ul>
<p>Below is a list of the basic arguments that can be passed to change the behavior
of the scan:</p>
<ul>
<li><p>To change the number of events taken at each step in the scan, pass the keyword argument <code class="docutils literal notranslate"><span class="pre">events</span></code> to the configure method. For example, the following will set the DAQ to take 1000 events at each step:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">snd</span><span class="o">.</span><span class="n">daq</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">events</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>To add a python value to be recorded in the DAQ, pass the keyword argument <code class="docutils literal notranslate"><span class="pre">controls</span></code> along with a <code class="docutils literal notranslate"><span class="pre">dict</span></code> that has a mapping from name to <code class="docutils literal notranslate"><span class="pre">obj</span></code>. For example, the following will create DAQ source named “E2” which will contain the channel cut energy:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">snd</span><span class="o">.</span><span class="n">daq</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">controls</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;E2&quot;</span> <span class="p">:</span> <span class="n">snd</span><span class="o">.</span><span class="n">E2</span><span class="p">})</span>
</pre></div>
</div>
</li>
<li><p>To record data, pass the keyword argument <code class="docutils literal notranslate"><span class="pre">record</span></code> along with <code class="docutils literal notranslate"><span class="pre">True</span></code>. For example, to record the data for this run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">snd</span><span class="o">.</span><span class="n">daq</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="running-the-scan">
<h2>Running the Scan<a class="headerlink" href="#running-the-scan" title="Permalink to this headline">¶</a></h2>
<p>Once the scan has been instantiated and the DAQ has been configured both in the
EDM screen and python, the scan can simply be passed into the run engine for
execution:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">RE_daq</span><span class="p">(</span><span class="n">plan</span><span class="p">)</span>
</pre></div>
</div>
<p>This should cause the daq to begin taking events at every scan step.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Once a plan has been run, it must be redeclared to be run again since
the contents have been consumed.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="calibrating_delay_scans.html" class="btn btn-neutral float-right" title="Calibrating Delay Scans" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="running_scans.html" class="btn btn-neutral float-left" title="Running Scans" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, SLAC National Accelerator Laboratory.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>